app-id: net.baseart.Glide
runtime: org.gnome.Platform
runtime-version: '3.36'
sdk: org.gnome.Sdk
sdk-extensions:
- org.freedesktop.Sdk.Extension.rust-stable
- org.freedesktop.Platform.VAAPI.Intel
command: glide
finish-args:
- --device=dri
- --filesystem=home
- --metadata=X-DConf=migrate-path=/net/baseart/Glide/
- --share=ipc
- --share=network
- --socket=pulseaudio
- --socket=wayland
- --socket=x11
- --env=GST_VAAPI_ALL_DRIVERS=1
- --env=LIBVA_DRIVER_NAME=iHD
build-options:
  append-path: /usr/lib/sdk/rust-stable/bin
  env:
    CARGO_HOME: /run/build/glide/cargo
modules:
- name: gst-libav
  builddir: true
  sources:
  - type: archive
    url: https://gstreamer.freedesktop.org/src/gst-libav/gst-libav-1.16.2.tar.xz
    sha256: c724f612700c15a933c7356fbeabb0bb9571fb5538f8b1b54d4d2d94188deef2
  config-opts:
  - --disable-gtkdoc
  - --with-system-libav=no
- name: gstreamer-vaapi
  buildsystem: meson
  builddir: true
  config-opts:
  - -Ddisable_gtkdoc=true
  - --libdir=lib
  sources:
  - type: archive
    url: https://gstreamer.freedesktop.org/src/gstreamer-vaapi/gstreamer-vaapi-1.16.2.tar.xz
    sha256: 191de7b0ab64a85dd0875c990721e7be95518f60e2a9106beca162004ed7c601
- name: glide
  buildsystem: meson
  sources:
  - type: archive
    url: https://github.com/philn/glide/releases/download/0.5.6/glide-0.5.6.tar.xz
    sha256: a031dd6c309a95154709990d27a94ec13eb064ec5b05f6ba0c74946d0501af53
  - type: patch
    path: patches/0001-appdata-Fix-launchable-tag.patch
